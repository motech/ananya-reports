<?xml version="1.0" encoding="iso-8859-1"?>

<setup xmlns="http://databene.org/benerator/0.7.0"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://databene.org/benerator/0.7.0 http://databene.org/benerator-0.7.0.xsd">

    <import platforms="db"/>

    <database id="ananya" url="jdbc:postgresql://localhost/ananya/"
              driver="org.postgresql.Driver" user="postgres" password="password" batch="false" schema="report"
              catalog="ananya"/>

    <!--
        Run this as the first one for other benerator tasks to run

        ALTER ROLE postgres set search_path=report, pubic
     -->

    <generate type="subscribers" count="10" consumer="ananya">

        <reference name="channel_id" targetType="channel_dimension" source="ananya" distribution="random" />
        <reference name="location_id" targetType="location_dimension" source="ananya" distribution="random" />
        <reference name="time_id" targetType="time_dimension" source="ananya" distribution="random" />
        <reference name="operator_id" targetType="operator_dimension" source="ananya" distribution="random" />

        <variable name="person" generator="org.databene.domain.person.PersonGenerator"/>

        <attribute name="msisdn" type="long" pattern="[7-9][0-9]{9}" unique="true"/>
        <attribute name="name" type="string" script="person.givenName"/>
        <attribute name="age_of_beneficiary" type="long" min="20" max="50" distribution="random"/>
        <attribute name="estimated_date_of_delivery"
                   generator="org.databene.benerator.primitive.datetime.DateGenerator"/>
        <attribute name="date_of_birth" generator="org.databene.benerator.primitive.datetime.DateGenerator"/>
    </generate>

</setup>